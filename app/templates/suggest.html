{% extends "base.html" %}
{% block title %}Suggestie - Vicaris Village{% endblock %}

{% block content %}

<div class="vv-suggest-page-bg">

    <div class="vv-suggest-wrapper">

        <h2 class="vv-suggest-title">ğŸµ Stel een artiest voor</h2>
        <p class="vv-suggest-subtitle">
            Kies jouw favoriete artiest uit de lijst hieronder en dien je suggestie in!
        </p>

        <!-- FORMULIER -->
        <form method="POST" onsubmit="return validateArtistInput()">
            
            <label for="artistInput" class="form-label fw-semibold mb-2">Kies artiest:</label>

            <!-- Custom dropdown -->
            <div class="vv-dropdown-wrapper">
                <input 
                    type="text" 
                    id="artistInput" 
                    name="artist_name"
                    class="vv-dropdown-input"
                    placeholder="Typ of kies een artiest..."
                    autocomplete="off"
                    required
                >
                <div id="artistDropdown" class="vv-dropdown-list"></div>
            </div>

            <button type="submit" class="vv-suggest-btn mt-4">Verstuur suggestie</button>

        </form>

    </div>

</div>

<!-- ARTIESTEN-LIJST (JS) -->
<script>
const ARTISTS = [
    "Arctic Monkeys","Coldplay","Imagine Dragons","Muse","The Killers",
    "Foo Fighters","Red Hot Chili Peppers","Ed Sheeran","Dua Lipa",
    "Billie Eilish","Post Malone","The Weeknd","Bruno Mars",
    "Calvin Harris","David Guetta","Kygo","Avicii","Bastille",
    "Sam Smith","Shawn Mendes","Harry Styles","Adele","Tame Impala",
    "Oasis","Florence + The Machine","Stromae","Lost Frequencies",
    "AngÃ¨le","Netsky","Selah Sue","Oscar and the Wolf","Metallica",
    "Linkin Park","Green Day","Paramore","Blink-182","Twenty One Pilots",
    "Avenged Sevenfold","The Chainsmokers","Zedd","Swedish House Mafia",
    "Maroon 5","The Script","Kings of Leon","Kanye West","Drake",
    "Eminem","50 Cent","Black Eyed Peas"
];

// Elements
const input = document.getElementById("artistInput");
const dropdown = document.getElementById("artistDropdown");

// Live search
input.addEventListener("input", () => {
    const q = input.value.toLowerCase().trim();
    dropdown.innerHTML = "";

    if (q.length === 0) {
        dropdown.style.display = "none";
        return;
    }

    const results = ARTISTS.filter(a => a.toLowerCase().includes(q));

    if (results.length === 0) {
        dropdown.style.display = "none";
        return;
    }

    results.forEach(artist => {
        const item = document.createElement("div");
        item.classList.add("vv-dropdown-item");
        item.textContent = artist;
        item.onclick = () => {
            input.value = artist;
            dropdown.style.display = "none";
        };
        dropdown.appendChild(item);
    });

    dropdown.style.display = "block";
});

// Klik buiten dropdown â†’ sluit
document.addEventListener("click", (e) => {
    if (!input.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.style.display = "none";
    }
});

// Validatie â†’ blijft backend-compatibel
function validateArtistInput() {
    const inputValue = input.value.trim().toLowerCase();
    const validValues = ARTISTS.map(a => a.toLowerCase());

    if (!validValues.includes(inputValue)) {
        alert("âš ï¸ Kies een artiest uit de lijst (niet zelf intypen).");
        input.focus();
        return false;
    }
    return true;
}
</script>

{% endblock %}
